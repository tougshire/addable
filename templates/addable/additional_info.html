{% with id=widget.attrs.id %}
<ul{% if id %} id="{{ id }}"{% endif %}{% if widget.attrs.class %} class="{{ widget.attrs.class }}"{% endif %}>
  {% for group, options, index in widget.optgroups %}
    {% if group %}<li>{{ group }}<ul{% if id %} id="{{ id }}_{{ index }}"{% endif %}>{% endif %}
    {% for option in options %}
      <li>
	{% if option.wrap_label %}<label{% if option.attrs.id %} for="{{ option.attrs.id }}"{% endif %}>{% endif %}
		{% comment %} include "django/forms/widgets/input.html" %}{% endcomment %}
		<input type="hidden" name="{{ option.name }}"{% if option.value != None %} value="{{ option.value|stringformat:'s' }}"{% endif %}{% include "django/forms/widgets/attrs.html" %}>
		<input type="text" name="{{ option.name }}_{{ option.value|stringformat:'s' }}"{% if option.value != None %} value="{{ option.value|stringformat:'s' }}"{% endif %}{% include "django/forms/widgets/attrs.html" %}>



	{% if option.wrap_label %} {{ option.label }}</label>{% endif %}

      </li>
    {% endfor %}
    {% if group %}</ul></li>{% endif %}
  {% endfor %}
</ul>
{% endwith %}
